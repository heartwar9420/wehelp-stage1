{% extends "index.html" %}

{% block header_title %}歡迎光臨，這是會員頁{% endblock %}

{% block body_only %}
<main class="container">
    <section class="card">
    <p style="text-align:center;">{{ name }} ，歡迎登入系統</p>
    <div style="text-align:center; margin-top: 16px;">
        <a href="/logout" class="logout-link">登出系統</a>
    </div>

    <hr>

    <p style="text-align:center;">快來留言吧</p>
    <form action="/createMessage" method="post">
        <div class="row">
        <label for="content">內容</label>
        <input id="content" name="content" type="text" required>
        </div>
        <div class="row submit-row">
        <button type="submit" class="btn">送出</button>
        </div>
    </form>

    <hr>
    <div class="message-list">
    {% for m in messages %}
    <div class="message-row">
        <span>{{ m.name }}：{{ m.content }}</span>

        {% if m.name == name %}
        <form action="/deleteMessage/{{ m.id }}"
                method="post"
                onsubmit="return confirm('確定要刪除這則留言嗎？');">
            <button type="submit" class="delete-btn">X</button>
        </form>
        {% endif %}
    </div>
    {% endfor %}
    </div>
    </section>
</main>
{% endblock %}
